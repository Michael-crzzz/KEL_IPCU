@model IPCU.Models.PostTestClinical
@{
    // Precaution Type Identification Questions
    var precautionQuestions = new List<string>
    {
        "What precaution is required for tuberculosis patients?",
        "What precaution applies to patients with MRSA?",
        "Which precaution should be used for COVID-19?",
        "What is the precaution type for influenza cases?",
        "What precaution is necessary for chickenpox (Varicella)?",
        "Which precaution is for C. difficile infection?",
        "Precaution type for meningococcal meningitis?",
        "Precaution needed for norovirus outbreak?",
        "Precaution for pertussis (whooping cough)?",
        "Precaution type for EVD (Ebola Virus Disease)?",
        "Precaution for hepatitis B management?",
        "Precaution for scabies patients?",
        "Precaution for SARS patients?",
        "Precaution type for measles (rubeola)?",
        "Precaution needed for conjunctivitis cases?",
        "Precaution for RSV (Respiratory Syncytial Virus)?",
        "Precaution required during any invasive procedure?"
    };

    // Room Placement Questions
    var roomQuestions = new List<string>
    {
        "Best room placement for airborne infection patients?",
        "Where to place patients with multi-drug resistant organisms?",
        "Ideal room type for neutropenic patients?",
        "Room placement for droplet precaution cases?",
        "Room for patients requiring strict isolation?",
        "Where should pediatric contact precaution patients be placed?",
        "Room placement for immunocompromised individuals?"
    };

    // PPE Questions
    var ppeQuestions = new List<string>
    {
        "Which PPE should be used for handling blood samples?",
        "What PPE is required for respiratory procedures?",
        "Which PPE is essential during surgery?",
        "What PPE protects against splashes and sprays?",
        "Which PPE is necessary when handling hazardous chemicals?"
    };
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<div class="container my-5">
    <div class="text-center mb-4">
        <h2 class="fw-bold">Post-Test Clinical Questionnaire</h2>
        <p class="text-muted">Please complete all sections carefully.</p>
    </div>
<form asp-controller="PostTestClinical" asp-action="Submit" method="post">

        <!-- Personal Information -->
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Personal Information</h5>
            </div>
            <div class="card-body">
                <div class="row g-3">

                    <div class="col-md-6">
                        <label asp-for="FullName" class="form-label">Full Name</label>
                        <input asp-for="FullName" class="form-control" placeholder="Enter full name" required />
                        <div class="invalid-feedback">Please enter your full name.</div>
                    </div>

                    <div class="col-md-6">
                        <label asp-for="EmployeeId" class="form-label">Employee ID</label>
                        <input asp-for="EmployeeId" class="form-control" placeholder="Enter employee ID" required />
                        <div class="invalid-feedback">Please enter your Employee ID.</div>
                    </div>

                    <div class="col-md-6">
                        <label asp-for="AgeGroup" class="form-label">Age Group</label>
                        <select asp-for="AgeGroup" class="form-select" required>
                            <option value="">Select</option>
                            <option value="18-25">18-25</option>
                            <option value="26-35">26-35</option>
                            <option value="36-45">36-45</option>
                            <option value="46+">46+</option>
                        </select>
                        <span asp-validation-for="AgeGroup" class="text-danger"></span>
                    </div>

                    <div class="col-md-6">
                        <label asp-for="Sex" class="form-label">Sex</label>
                        <select asp-for="Sex" class="form-select" required>
                            <option value="">Select</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                        <span asp-validation-for="Sex" class="text-danger"></span>
                    </div>

                    <div class="col-md-6">
                        <label asp-for="PWD" class="form-label">PWD</label>
                        <select asp-for="PWD" class="form-select" required>
                            <option value="">Select</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <span asp-validation-for="PWD" class="text-danger"></span>
                    </div>

                    <div class="col-md-6">
                        <label asp-for="CivilStatus" class="form-label">Civil Status</label>
                        <select asp-for="CivilStatus" class="form-select" required>
                            <option value="">Select</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Divorced">Divorced</option>
                            <option value="Widowed">Widowed</option>
                        </select>
                        <span asp-validation-for="CivilStatus" class="text-danger"></span>
                    </div>

                    <div class="col-md-12">
                        <label asp-for="Department" class="form-label">Department</label>
                        <input asp-for="Department" class="form-control" placeholder="Enter your department" required />
                        <span asp-validation-for="Department" class="text-danger"></span>
                    </div>

                </div>
            </div>
        </div>

        <!-- Precaution Questions -->
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">Precaution Type Identification</h5>
            </div>
            <div class="card-body">
                @for (int i = 0; i < precautionQuestions.Count; i++)
                {
                    <div class="mb-3">
                        <h6>@precautionQuestions[i]</h6>
                        <div class="row">
                            @foreach (var option in new[] { "Airborne precaution", "Contact precaution", "Droplet precaution", "Standard precaution" })
                            {
                                <div class="col-md-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="Question@(i + 1)" value="@option" required />
                                        <label class="form-check-label">@option</label>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- Room Placement -->
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">Room Placement</h5>
            </div>
            <div class="card-body">
                @for (int i = 0; i < roomQuestions.Count; i++)
                {
                    <div class="mb-3">
                        <h6>@roomQuestions[i]</h6>
                        <div class="row">
                            @foreach (var option in new[] { "Single room only", "Ward type", "AIIR or Isolation room" })
                            {
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="Question@(i + 18)" value="@option" />
                                        <label class="form-check-label">@option</label>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- PPE Section -->
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">Personal Protective Equipment (PPE)</h5>
            </div>
            <div class="card-body">
                @for (int i = 0; i < ppeQuestions.Count; i++)
                {
                    <div class="mb-3">
                        <h6>@ppeQuestions[i]</h6>
                        <div class="row">
                            @foreach (var option in new[] { "Gloves", "Isolation Gown", "Mask", "Respirator or N95", "Face/Eye Protection" })
                            {
                                <div class="col-md-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="Question@(i + 25)" value="@option" />
                                        <label class="form-check-label">@option</label>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- Submit -->
        <div class="text-center">
            <button type="submit" class="btn btn-success btn-lg px-5">Submit</button>
        </div>

    </form>
</div>

<script>
    // Bootstrap validation
    (() => {
        'use strict'
        const forms = document.querySelectorAll('.needs-validation')
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
                form.classList.add('was-validated')
            }, false)
        })
    })()
</script>
