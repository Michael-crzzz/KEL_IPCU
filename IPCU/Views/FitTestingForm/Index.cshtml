@model IEnumerable<IPCU.Models.FitTestingForm>

@{
    ViewData["Title"] = "Fit Testing Records";
}

<!-- Bootstrap & Font Awesome for Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<h1 class="mb-4 text-center">Fit Testing Records</h1>

<div class="d-flex justify-content-between mb-3">
    <a asp-action="Create" class="btn btn-primary"><i class="fa fa-plus"></i> Create New</a>
    <input type="text" id="searchBox" class="form-control w-25" placeholder="Search...">
</div>

<div class="table-responsive">
    <table class="table table-bordered table-striped table-hover align-middle" id="fitTestingTable">
        <thead class="table-dark text-center">
            <tr>
                <th>Name of Healthcare Worker (HCW): </th>
                <th>@Html.DisplayNameFor(model => model.DUO)</th>
                <th>@Html.DisplayNameFor(model => model.Limitation)</th>
                <th>@Html.DisplayNameFor(model => model.Test_Results)</th>

                @* <th>@Html.DisplayNameFor(model => model.Fit_Test_Solution)</th>
                <th>@Html.DisplayNameFor(model => model.Sensitivity_Test)</th>
                <th>@Html.DisplayNameFor(model => model.Respiratory_Type)</th>
                <th>@Html.DisplayNameFor(model => model.Model)</th>
                <th>@Html.DisplayNameFor(model => model.Size)</th>
                <th>@Html.DisplayNameFor(model => model.Normal_Breathing)</th>
                <th>@Html.DisplayNameFor(model => model.Deep_Breathing)</th>
                <th>@Html.DisplayNameFor(model => model.Turn_head_side_to_side)</th>
                <th>@Html.DisplayNameFor(model => model.Move_head_up_and_down)</th>
                <th>@Html.DisplayNameFor(model => model.Reading)</th>
                <th>@Html.DisplayNameFor(model => model.Bending_Jogging)</th>
                <th>@Html.DisplayNameFor(model => model.Normal_Breathing_2)</th>
                <th>Name of fit tester</th>
                <th>Department/Unit/Office</th>*@
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.HCW_Name)</td>
                    <td>@Html.DisplayFor(modelItem => item.DUO)</td>
                    <td>@Html.DisplayFor(modelItem => item.Limitation)</td>
                    <td>@Html.DisplayFor(modelItem => item.Test_Results)</td>

                    @**  <td>@Html.DisplayFor(modelItem => item.Fit_Test_Solution)</td>
                    <td>@Html.DisplayFor(modelItem => item.Sensitivity_Test)</td>
                    <td>@Html.DisplayFor(modelItem => item.Respiratory_Type)</td>
                    <td>@Html.DisplayFor(modelItem => item.Model)</td>
                    <td>@Html.DisplayFor(modelItem => item.Size)</td>
                    <td>@Html.DisplayFor(modelItem => item.Normal_Breathing)</td>
                    <td>@Html.DisplayFor(modelItem => item.Deep_Breathing)</td>
                    <td>@Html.DisplayFor(modelItem => item.Turn_head_side_to_side)</td>
                    <td>@Html.DisplayFor(modelItem => item.Move_head_up_and_down)</td>
                    <td>@Html.DisplayFor(modelItem => item.Reading)</td>
                    <td>@Html.DisplayFor(modelItem => item.Bending_Jogging)</td>
                    <td>@Html.DisplayFor(modelItem => item.Normal_Breathing_2)</td>
                    <td>@Html.DisplayFor(modelItem => item.Name_of_Fit_Tester)</td>
                    <td>@Html.DisplayFor(modelItem => item.DUO_Tester)</td>*@
                    <td>@Html.DisplayFor(modelItem => item.SubmittedAt)</td>
                    <td>
                        <div class="btn-group" role="group">
                            <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-warning btn-sm" data-bs-toggle="tooltip" title="Edit Record">
                                <i class="fa fa-edit"></i>
                            </a>
                            <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-info btn-sm" data-bs-toggle="tooltip" title="View Details">
                                <i class="fa fa-eye"></i>
                            </a>
                            <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger btn-sm" data-bs-toggle="tooltip" title="Delete">
                                <i class="fa fa-trash"></i>
                            </a>
                            <a asp-action="PrintPdf" asp-route-id="@item.Id" target="_blank" class="btn btn-secondary btn-sm" data-bs-toggle="tooltip" title="Preview PDF">
                                <i class="fa fa-print"></i>
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- JavaScript for Search Functionality -->
<script>
    document.getElementById("searchBox").addEventListener("keyup", function() {
        let filter = this.value.toLowerCase();
        let rows = document.querySelectorAll("#fitTestingTable tbody tr");
        rows.forEach(row => {
            row.style.display = row.textContent.toLowerCase().includes(filter) ? "" : "none";
        });
    });
</script>
