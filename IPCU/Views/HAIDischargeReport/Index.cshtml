@model IPCU.Controllers.HAIDischargeReportViewModel

@{
    ViewData["Title"] = "HAI Discharge Report";
}

<h2>HAI Discharge Report</h2>

<div class="card">
    <div class="card-header">
        <h5 class="card-title">Generate HAI Discharge Report</h5>
    </div>
    <div class="card-body">
        <form asp-action="GenerateReport" asp-controller="HAIDischargeReport" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="form-group">
                        <label asp-for="ReportYear" class="control-label"></label>
                        <select asp-for="ReportYear" class="form-control">
                            @{
                                int currentYear = DateTime.Now.Year;
                                for (int year = 2020; year <= currentYear; year++)
                                {
                                    <option value="@year">@year</option>
                                }
                            }
                        </select>
                        <span asp-validation-for="ReportYear" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-file-excel"></i> Generate Excel Report
                </button>
            </div>
        </form>
    </div>
</div>

<div class="mt-4">
    <h4>Quick Access to Year Reports</h4>
    <div class="row">
        @{
            int currentYear = DateTime.Now.Year;
            for (int year = currentYear; year >= 2020; year--)
            {
                <div class="col-md-2 mb-2">
                    <a asp-action="GenerateYearlyReport" asp-route-year="@year" class="btn btn-outline-primary btn-block">
                        <i class="fas fa-file-excel"></i> @year Report
                    </a>
                </div>
            }
        }
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}