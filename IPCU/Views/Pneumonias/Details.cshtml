@model IPCU.Models.Pneumonia

@{
    ViewData["Title"] = "Patient Details";
}

<h2>Patient Details</h2>

<fieldset class="border p-3 mb-4">
    <legend class="w-auto px-2 font-weight-bold">Patient Information</legend>
    <table class="table table-bordered">
        <tr>
            <td>
                <label asp-for="Fname"></label>
                <input asp-for="Fname" class="form-control" disabled />
                <span asp-validation-for="Fname" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="Mname"></label>
                <input asp-for="Mname" class="form-control" disabled />
                <span asp-validation-for="Mname" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="Lname"></label>
                <input asp-for="Lname" class="form-control" disabled />
                <span asp-validation-for="Lname" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="HospitalNumber"></label>
                <input asp-for="HospitalNumber" class="form-control" disabled />
                <span asp-validation-for="HospitalNumber" class="text-danger"></span>
            </td>
        </tr>
        <tr>
            <td>
                <label asp-for="DateOfBirth"></label>
                <input asp-for="DateOfBirth" type="date" class="form-control" disabled />
                <span asp-validation-for="DateOfBirth" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="Age"></label>
                <input asp-for="Age" class="form-control" disabled />
                <span asp-validation-for="Age" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="UnitWardArea"></label>
                <input asp-for="UnitWardArea" class="form-control" disabled />
                <span asp-validation-for="UnitWardArea" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="MainService"></label>
                <input asp-for="MainService" class="form-control" disabled />
                <span asp-validation-for="MainService" class="text-danger"></span>
            </td>
        </tr>
        <tr>
            <td>
                <label asp-for="DateOfEvent"></label>
                <input asp-for="DateOfEvent" type="date" class="form-control" disabled />
                <span asp-validation-for="DateOfEvent" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="Investigator"></label>
                <input asp-for="Investigator" class="form-control" disabled />
                <span asp-validation-for="Investigator" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="DateOfAdmission"></label>
                <input asp-for="DateOfAdmission" type="date" class="form-control" disabled />
                <span asp-validation-for="DateOfAdmission" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="Disposition"></label>
                <select asp-for="Disposition" class="form-control" disabled>
                    <option value="">-- Select Disposition --</option>
                    <option>Mortality</option>
                    <option>Discharged</option>
                    <option>Still Admitted</option>
                    <option>Transferred In</option>
                    <option>Transferred Out</option>
                </select>
                <span asp-validation-for="Disposition" class="text-danger"></span>

                <div id="dispositionTransferDiv" style="display:none;">

                    <label asp-for="DispositionTransfer"></label>
                    <input asp-for="DispositionTransfer" class="form-control" disabled />
                    <span asp-validation-for="DispositionTransfer" class="text-danger"></span>

                </div>
            </td>

        </tr>
        <tr>

            <td>
                <label asp-for="DispositionDate"></label>
                <input asp-for="DispositionDate" type="date" class="form-control" disabled />
                <span asp-validation-for="DispositionDate" class="text-danger"></span>
            </td>

            <td>
                <label asp-for="Gender"></label>
                <select asp-for="Gender" class="form-control" disabled>
                    <option value="">Select</option>
                    <option>Male</option>
                    <option>Female</option>
                </select>
                <span asp-validation-for="Gender" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="Classification"></label>
                <select asp-for="Classification" class="form-control" disabled>
                    <option value="">Select</option>
                    <option>Pay</option>
                    <option>Service</option>
                </select>
                <span asp-validation-for="Classification" class="text-danger"></span>
            </td>
            <td>
                <label asp-for="MDRO"></label>
                <select asp-for="MDRO" class="form-control" disabled>
                    <option value="">Select</option>
                    <option>Yes</option>
                    <option>No</option>
                </select>
                <span asp-validation-for="MDRO" class="text-danger"></span>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <label asp-for="TypeClass" class="control-label"></label>
                <select asp-for="TypeClass" class="form-control" id="TypeClass" disabled>
                    <option value="">Select Option</option>
                    <option value="PNEU1">PNEU1</option>
                    <option value="PNEU2">PNEU2</option>
                    <option value="PNEU3">PNEU3</option>
                </select>
                <span asp-validation-for="TypeClass" class="text-danger"></span>
            </td>
            <td colspan="4">
                <label asp-for="PNEU_Subclass" class="control-label"></label>
                <select asp-for="PNEU_Subclass" class="form-control" id="PNEU_Subclass" disabled>
                    <option value="">Select Subclass</option>
                </select>
                <span asp-validation-for="PNEU_Subclass" class="text-danger"></span>
            </td>
        </tr>
    </table>
</fieldset>




<!-- Hidden Form Table -->
<div id="pneu1_1_section" class="table-section" style="display: none; margin-top: 20px;">
    <table class="table table-bordered">
        <thead class="table-grey">
            <tr>
                <th style="text-align: center; background-color: #f8f9fa;">PNU1 Details</th>
            </tr>
            <tr>
                <th>
                    <strong>Any patient, any age group,</strong>
                    has one of the following found in <strong>two or more</strong> chest imaging test results
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- First Step -->
            <tr id="step1">
                <td>
                    <label>
                        Either <strong>new and persistent OR progressive and persistent:</strong>
                    </label>
                    <div>
                        <label><input type="radio" asp-for="PersistentorProgressive1_1" value="Infiltrate" disabled> Infiltrate</label><br>
                        <label><input type="radio" asp-for="PersistentorProgressive1_1" value="Consolidation" disabled> Consolidation</label><br>
                        <label><input type="radio" asp-for="PersistentorProgressive1_1" value="Cavitation" disabled> Cavitation</label><br>
                        <label><input type="radio" asp-for="PersistentorProgressive1_1" value="Pneumatoceles" disabled> Pneumatoceles, ≤1 year old</label>
                    </div>
                    <span asp-validation-for="PersistentorProgressive1_1" class="text-danger"></span>
                </td>
            </tr>

            <!-- Second Step (Initially Hidden) -->
            <tr id="step2">
                <td>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input class="form-check-input requirement" asp-for="Fever1_1" disabled />
                        <span>Fever (> 38.0°C)</span>
                    </div>
                    <div>
                        <input class="form-check-input requirement" asp-for="Leukopenia1_1" disabled />
                        <span>Leukopenia (≤ 4,000 WBC/mm³)</span>
                    </div>
                    <div>
                        <input class="form-check-input requirement" asp-for="Leukocytosis1_1" disabled />
                        <span>Leukocytosis (≥ 12,000 WBC/mm³)</span>
                    </div>
                    <div>
                        <input class="form-check-input requirement" asp-for="Adults70old1_1" disabled />
                        <span>Adults ≥ 70 years old, altered mental status with no other recognized cause</span>
                    </div>
                </td>
            </tr>

            <!-- Third Step (Initially Hidden) -->
            <tr id="step3">
                <td>
                    <label><strong>AND, at least two (2) of the following:</strong></label>
                    <div>
                        <input class="form-check-input final-requirement" asp-for="NewPurulentSputum1_1" disabled />
                        <span>
                            New onset of purulent sputum or change
                            in character of sputum, or increased
                            respiratory secretions, or suctioning
                            requirements
                        </span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement" asp-for="WorseningCoughOrDyspnea1_1" disabled />
                        <span>New onset or worsening cough, or dyspnea, or tachypnea</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement" asp-for="RalesOrBronchialBreathSounds1_1" disabled />
                        <span>Rales or bronchial breath sounds</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement" asp-for="WorseningGasExchange1_1" disabled />
                        <span>Worsening gas exchange, increased oxygen requirements, or ventilator demand</span>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- PNEU1_2 Form -->
<div id="pneu1_2_section" class="table-section" style="display: none; margin-top: 20px;">
    <table class="table table-bordered">
        <thead class="table-grey">
            <tr>
                <th style="text-align: center; background-color: #f8f9fa;">PNU1_2 Details</th>
            </tr>
            <tr>
                <th>
                    <strong>Alternative criteria,</strong> for infants
                    <strong>≤ 1 year old,</strong> has one of the following found in
                    <strong> two or more</strong> chest imaging test results
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- First Step -->
            <tr id="step1_2">
                <td>
                    <label>
                        Either <strong>new and persistent OR progressive and persistent:</strong>
                    </label>
                    <div>
                        <label><input type="radio" asp-for="PersistentorProgressive1_2" value="Infiltrate" disabled> Infiltrate</label><br>
                        <label><input type="radio" asp-for="PersistentorProgressive1_2" value="Consolidation" disabled> Consolidation</label><br>
                        <label><input type="radio" asp-for="PersistentorProgressive1_2" value="Cavitation" disabled> Cavitation</label><br>
                        <label><input type="radio" asp-for="PersistentorProgressive1_2" value="Pneumatoceles" disabled> Pneumatoceles, ≤1 year old</label>
                    </div>
                    <span asp-validation-for="PersistentorProgressive1_2" class="text-danger"></span>
                </td>
            </tr>

            <!-- Second Step (Initially Hidden) -->
            <tr id="step2_2">
                <td>
                    <label><strong>AND</strong></label>
                    <div>
                        <input class="form-check-input requirement_2" asp-for="WorseningGasExchange1_2" disabled />
                        <span>Worsening gas exchange</span>
                    </div>
                </td>
            </tr>

            <!-- Third Step (Initially Hidden) -->
            <tr id="step3_2">
                <td>
                    <label><strong>AND, at least three (3) of the following:</strong></label>
                    <div>
                        <input class="form-check-input final-requirement_2" asp-for="TemperatureInstability1_2" disabled />
                        <span>Temperature instability</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_2" asp-for="LeukopeniaOrLeukocytosis1_2" disabled />
                        <span>
                            Leukopenia (≤ 4000 WBC/mm³) or
                            leukocytosis (≥ 15,000 WBC/mm³) and left shift (≥ 10% band forms)
                        </span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_2" asp-for="NewPurulentSputum1_2" disabled />
                        <span>
                            New onset of purulent sputum or change
                            in character of sputum, or increased
                            respiratory secretions, or suctioning
                            requirements
                        </span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_2" asp-for="ApneaOrTachypneaOrNasalFlaring1_2" disabled />
                        <span>
                            Apnea, tachypnea, nasal flaring with
                            retraction of chest wall, or with grunting
                        </span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_2" asp-for="WheezingRalesOrRhonchi1_2" disabled />
                        <span>Wheezing, rales, or rhonchi</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_2" asp-for="Cough1_2" disabled />
                        <span>Cough</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_2" asp-for="BradycardiaOrTachycardia1_2" disabled />
                        <span>Bradycardia (&lt;100) or tachycardia (&gt;170)</span>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>


<div id="pneu1_3_section" class="table-section" style="display: none;">
    <table class="table table-bordered">
        <thead class="table-grey">
            <tr>
                <th style="text-align: center; background-color: #f8f9fa;">PNU1_3 Details</th>
            </tr>
            <tr>
                <th>
                    <strong>Alternative criteria,</strong> for child <strong>>1 year old or ≤12 years old,</strong> has one of the following found in <strong>two or more</strong> chest imaging test results
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- First Step -->
            <tr id="step1_3">
                <td>
                    <label>
                        Either <strong>new and persistent OR progressive and persistent:</strong>
                    </label>
                    <div>
                        <label><input type="radio" asp-for="PersistentorProgressive1_3" value="Infiltrate" disabled> Infiltrate</label><br>
                        <label><input type="radio" asp-for="PersistentorProgressive1_3" value="Consolidation" disabled> Consolidation</label><br>
                        <label><input type="radio" asp-for="PersistentorProgressive1_3" value="Cavitation" disabled> Cavitation</label><br>
                    </div>
                    <span asp-validation-for="PersistentorProgressive1_3" class="text-danger"></span>
                </td>
            </tr>

            <!-- Second Step (Initially Hidden) -->
            <tr id="step2_3">
                <td>
                    <div>
                        <label><strong>AND, at least three (3) of the following:</strong></label>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_3" asp-for="Fever1_3" disabled />
                        <span>Fever (> 38°C) or hypothermia (<36°C)</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_3" asp-for="Leukopenia1_3" disabled />
                        <span>Leukopenia (≤ 4000 WBC/mm³) or leukocytosis (≥ 15,000 WBC/mm³)</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_3" asp-for="NewPurulentSputum1_3" disabled />
                        <span>New onset of purulent sputum or change in character of sputum, or increased respiratory secretions, or suctioning requirements</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_3" asp-for="NewWorseningCough1_3" disabled />
                        <span>New onset or worsening cough, or dyspnea, or apnea, or tachypnea</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_3" asp-for="RalesorBronchial1_3" disabled />
                        <span>Rales or bronchial breath sounds</span>
                    </div>
                    <div>
                        <input class="form-check-input final-requirement_3" asp-for="WorseningGas1_3" disabled />
                        <span>Worsening gas exchange, increased oxygen requirements, or ventilator demand</span>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>


<!-- PNEU2_1 Form -->
<div id="pneu2_1_section" class="table-section" style="display: none; margin-top: 20px;">
    <table class="table table-bordered">
        <thead class="table-grey">
            <tr>
                <th style="text-align: center; background-color: #f8f9fa;">PNU2_1 Details</th>
            </tr>
            <tr>
                <th>For Pneumonia with Common Bacterial or Filamentous Fungal Pathogens</th>
            </tr>
        </thead>
        <tbody>
            <!-- Step 1 -->
            <tr id="step1_1_1">
                <td>
                    <label>Either <strong>new and persistent OR progressive and persistent:</strong></label>
                    <div>
                        <label><input asp-for="PersistentorProgressive2_1" type="radio" value="Infiltrate" disabled> Infiltrate</label><br>
                        <label><input asp-for="PersistentorProgressive2_1" type="radio" value="Consolidation" disabled> Consolidation</label><br>
                        <label><input asp-for="PersistentorProgressive2_1" type="radio" value="Cavitation" disabled> Cavitation</label><br>
                        <label><input asp-for="PersistentorProgressive2_1" type="radio" value="Pneumatoceles" disabled> Pneumatoceles</label><br>
                    </div>
                </td>
            </tr>

            <!-- Step 2 (Initially Hidden) -->
            <tr id="step2_1_1">
                <td>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input asp-for="Fever2_1" class="form-check-input requirement_3_1" type="checkbox" disabled>
                        <span>Fever (> 38.0°C)</span>
                    </div>
                    <div>
                        <input asp-for="Leukopenia12_1" class="form-check-input requirement_3_1" type="checkbox" disabled>
                        <span>Leukopenia (≤ 4,000 WBC/mm³)</span>
                    </div>
                    <div>
                        <input asp-for="Leukocytosis2_1" class="form-check-input requirement_3_1" type="checkbox" disabled>
                        <span>Leukocytosis (≥ 12,000 WBC/mm³)</span>
                    </div>
                    <div>
                        <input asp-for="Adults70old2_1" class="form-check-input requirement_3_1" type="checkbox" disabled>
                        <span>Adults ≥ 70 years old, altered mental status with no other recognized cause</span>
                    </div>
                </td>
            </tr>

            <!-- Step 3 (Initially Hidden) -->
            <tr id="step3_1_1">
                <td>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input asp-for="NewPurulentSputum2_1" class="form-check-input final-requirement_3_1" type="checkbox" disabled>
                        <span>New onset of purulent sputum or change in character of sputum, or increased respiratory secretions, or suctioning requirements</span>
                    </div>
                    <div>
                        <input asp-for="WorseningCoughOrDyspnea2_1" class="form-check-input final-requirement_3_1" type="checkbox" disabled>
                        <span>New onset or worsening cough, dyspnea, or tachypnea</span>
                    </div>
                    <div>
                        <input asp-for="RalesOrBronchialBreathSounds2_1" class="form-check-input final-requirement_3_1" type="checkbox" disabled>
                        <span>Rales or bronchial breath sounds</span>
                    </div>
                    <div>
                        <input asp-for="WorseningGasExchange2_1" class="form-check-input final-requirement_3_1" type="checkbox" disabled>
                        <span>Worsening gas exchange or increased oxygen requirements, or ventilator demand</span>
                    </div>
                </td>
            </tr>

            <!-- Step 4 (Initially Hidden) -->
            <tr id="step4_1_1">
                <td>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input asp-for="OrganismIdentifiedFromBlood_2_1" class="form-check-input" type="checkbox" disabled>
                        <span>Organism identified from blood</span>
                    </div>
                    <div>
                        <input asp-for="PositiveQuantitativeCultureLRT_2_1" class="form-check-input" type="checkbox" disabled>
                        <span>
                            Positive quantitative culture or corresponding semi-quantitative culture
                            result from minimally-contaminated LRT
                            specimen (specifically BAL, protected
                            specimen brushing, or endotracheal aspirate)
                        </span>
                    </div>
                    <div>
                        <input asp-for="BALCellsContainIntracellularBacteria_2_1" class="form-check-input" type="checkbox" disabled>
                        <span>
                            ≥5% BAL-obtained cells contain
                            intracellular bacteria on direct microscopic exam (for example: Gram’s stain)
                        </span>
                    </div>
                    <div>
                        <input asp-for="PositiveQuantitativeCultureLungTissue_2_1" class="form-check-input" type="checkbox" disabled>
                        <span>
                            Positive quantitative culture or corresponding semi-quantitative culture
                            result of lung tissue
                        </span>
                    </div>
                    <div>
                        <input asp-for="HistopathologicExam2_1" class="form-check-input" type="checkbox" disabled>
                        <span>Histopathologic exam shows at least one of the following evidences of pneumonia:</span>
                    </div>
                    <div style="margin-left: 20px;">
                        <input class="form-check-input" asp-for="AbscessFormationOrFoci_2_1" disabled />
                        <span>
                            Abscess formation or foci of consolidation with intense PMN
                            accumulation in bronchioles and alveoli
                        </span>
                    </div>
                    <div style="margin-left: 20px;">
                        <input class="form-check-input" asp-for="EvidenceOfFungalInvasion_2_1" disabled />
                        <span>
                            Evidence of lung parenchyma invasion
                            by fungal hyphae or pseudohyphae
                        </span>
                    </div>
                </td>
            </tr>

            <!-- Culture Details -->
            <tr>
                <td>
                    <span><strong>Culture date:</strong></span>
                    <input asp-for="CultureDate2_1" type="date" class="form-control" disabled />
                    <span><strong>Culture results:</strong></span>
                    <input asp-for="CultureResults2_1" class="form-control" disabled />
                </td>
            </tr>
        </tbody>
    </table>
</div>



<div id="pneu2_2_section" class="table-section" style="display: none;">
    <table class="table table-bordered">
        <thead class="table-grey">
            <tr>
                <th style="text-align: center; background-color: #f8f9fa;">PNU2_2 Details</th>
            </tr>
            <tr>
                <th>
                    For Viral, Legionella, and other Bacterial Pneumonias with Definitive Laboratory Findings
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- Step 1 -->
            <tr id="step1_2_2">
                <td>
                    <label>Either <strong>new and persistent OR progressive and persistent:</strong></label>
                    <div>
                        <label><input asp-for="PersistentorProgressive2_2" type="radio" value="Infiltrate" disabled> Infiltrate</label><br>
                        <label><input asp-for="PersistentorProgressive2_2" type="radio" value="Consolidation" disabled> Consolidation</label><br>
                        <label><input asp-for="PersistentorProgressive2_2" type="radio" value="Cavitation" disabled> Cavitation</label><br>
                        <label><input asp-for="PersistentorProgressive2_2" type="radio" value="Pneumatoceles" disabled> Pneumatoceles</label><br>
                    </div>
                </td>
            </tr>

            <!-- Step 2 (Initially Hidden) -->
            <tr id="step2_2_2" style="display: none;">
                <td>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input asp-for="Fever2_1" class="form-check-input requirement_2_2" type="checkbox" disabled>
                        <span>Fever (> 38.0°C)</span>
                    </div>
                    <div>
                        <input asp-for="Leukopenia12_1" class="form-check-input requirement_2_2" type="checkbox" disabled>
                        <span>Leukopenia (≤ 4,000 WBC/mm³)</span>
                    </div>
                    <div>
                        <input asp-for="Leukocytosis2_1" class="form-check-input requirement_2_2" type="checkbox" disabled>
                        <span>Leukocytosis (≥ 12,000 WBC/mm³)</span>
                    </div>
                    <div>
                        <input asp-for="Adults70old2_1" class="form-check-input requirement_2_2" type="checkbox" disabled>
                        <span>Adults ≥ 70 years old, altered mental status with no other recognized cause</span>
                    </div>
                </td>
            </tr>

            <!-- Step 3 (Initially Hidden) -->
            <tr id="step3_2_2">
                <td>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input asp-for="NewPurulentSputum2_2" class="form-check-input final-requirement_2_2" type="checkbox" disabled>
                        <span>
                            New onset of purulent sputum or change
                            in character of sputum, or increased
                            respiratory secretions, or suctioning
                            requirements
                        </span>
                    </div>
                    <div>
                        <input asp-for="WorseningCoughOrDyspnea2_2" class="form-check-input final-requirement_2_2" type="checkbox" disabled>
                        <span>New onset or worsening cough, dyspnea, or tachypnea</span>
                    </div>
                    <div>
                        <input asp-for="RalesOrBronchialBreathSounds2_2" class="form-check-input final-requirement_2_2" type="checkbox" disabled>
                        <span>Rales or bronchial breath sounds</span>
                    </div>
                    <div>
                        <input asp-for="WorseningGasExchange2_2" class="form-check-input final-requirement_2_2" type="checkbox" disabled>
                        <span>Worsening gas exchange or increased oxygen requirements</span>
                    </div>
                </td>
            </tr>

            <!-- Step 4 (Initially Hidden) -->
            <tr id="step4_2_2">
                <td>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input asp-for="VirusBordetellaLegionella2_2" class="form-check-input" type="checkbox" disabled>
                        <span>
                            Virus, Bordetella, Legionella, Chlamydia, or Mycoplasma identified from respiratory
                            secretions or tissue by a culture or non-culture based microbiologic testing method
                        </span>
                    </div>
                    <div>
                        <input asp-for="FourfoldrisePaired2_2" class="form-check-input" type="checkbox" disabled>
                        <span>Fourfold rise in paired sera (IgG) for pathogen</span>
                    </div>
                    <div>
                        <input asp-for="FourfoldriseLegionella2_2" class="form-check-input" type="checkbox" disabled>
                        <span>
                            Fourfold rise in Legionella pneumophila serogroup 1 antibody titer to ≥ 1:128 in
                            paired acute and convalescent sera by indirect IFA
                        </span>
                    </div>
                    <div>
                        <input asp-for="DetectionofLegionella2_2" class="form-check-input" type="checkbox" disabled>
                        <span>
                            Detection of Legionella pneumophila serogroup 1 antigens in urine by RIA or EIA
                        </span>
                    </div>
                </td>
            </tr>

            <!-- Culture Details (Always Visible) -->
            <tr id="culture_details_2_2">
                <td>
                    <span><strong>Culture date:</strong></span>
                    <input asp-for="CultureDate2_2" type="date" class="form-control" disabled />
                    <span>Culture results:</span>
                    <input asp-for="CultureResults2_2" class="form-control" disabled />
                </td>
            </tr>
        </tbody>
    </table>
</div>


<div id="pneu3_section" class="table-section" style="display: none;">
    <table class="table table-bordered">
        <thead class="table-grey">
            <tr>
                <th style="text-align: center; background-color: #f8f9fa;">PNU3 Details</th>
            </tr>
            <tr>
                <th>
                    Specific Site Algorithms for Pneumonia in Immunocompromised Patients
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- Step 1 -->
            <tr>
                <td>
                    <label>Either <strong>new and persistent OR progressive and persistent:</strong></label>
                    <div>
                        <label><input asp-for="PersistentorProgressive3" type="radio" value="Infiltrate" disabled> Infiltrate</label><br>
                        <label><input asp-for="PersistentorProgressive3" type="radio" value="Consolidation" disabled> Consolidation</label><br>
                        <label><input asp-for="PersistentorProgressive3" type="radio" value="Cavitation" disabled> Cavitation</label><br>
                        <label><input asp-for="PersistentorProgressive3" type="radio" value="Pneumatoceles" disabled> Pneumatoceles</label><br>
                    </div>
                </td>
            </tr>
            <!-- Step 2 (Initially Hidden) -->
            <tr id="step2_3_3" >
                <td>
                    <label><strong>AND, patient is immunocompromised*</strong></label>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input asp-for="Fever3" type="checkbox" disabled>
                        <span>Fever (> 38.0°C)</span>
                    </div>
                    <div>
                        <input asp-for="Adults70old3" type="checkbox" disabled>
                        <span>
                            Adults ≥ 70 years old, altered mental status with no other recognized cause
                            New onset of purulent sputumor changein character of sputum,
                            or increased respiratory secretions, or suctioning requirements
                        </span>
                    </div>
                    <div>
                        <input asp-for="NewPurulentSputum3" type="checkbox" disabled>
                        <span>New onset of purulent sputumor changein character of sputum, or increasedrespiratory secretions, or suctioningrequirements</span>
                    </div>
                    <div>
                        <input asp-for="WorseningCoughOrDyspnea3" type="checkbox" disabled>
                        <span>New onset or worsening cough, or dyspnea, or tachypnea</span>
                    </div>
                    <div>
                        <input asp-for="RalesOrBronchialBreathSounds3" type="checkbox" disabled>
                        <span>Rales or bronchial breath sounds</span>
                    </div>
                    <div>
                        <input asp-for="WorseningGasExchange3" type="checkbox" disabled>
                        <span>Worsening gas exchange, increasedoxygen requirements, or ventilator demand</span>
                    </div>
                    <div>
                        <input asp-for="Hemoptysis3" type="checkbox" disabled>
                        <span>Hemoptysis</span>
                    </div>
                    <div>
                        <input asp-for="PleuriticChestPain3" type="checkbox" disabled>
                        <span>Pleuritic chest pain</span>
                    </div>
                </td>
            </tr>
            <!-- Step 3 (Initially Hidden) -->
            <tr id="step3_3_3">
                <td>
                    <label><strong>AND, at least one (1) of the following:</strong></label>
                    <div>
                        <input asp-for="IdentificationCandida3" type="checkbox" disabled>
                        <span>Fever (> 38.0°C)</span>
                    </div>
                    <div>
                        <input asp-for="EvidenceofFungi3" type="checkbox" disabled>
                        <span>Leukopenia (≤ 4,000 WBC/mm³)</span>
                    </div>
                    <!---->
                    <div>
                        <input asp-for="DirectMicroscopicExam3" type="checkbox" disabled>
                        <span>Leukocytosis (≥ 12,000 WBC/mm³)</span>
                    </div>
                    <div>
                        <input asp-for="PositiveCultureFungi3" type="checkbox" disabled>
                        <span>Adults ≥ 70 years old, altered mental status with no other recognized cause</span>
                    </div>
                    <div>
                        <input asp-for="NonCultureDiagnostic3" type="checkbox" disabled>
                        <span>Adults ≥ 70 years old, altered mental status with no other recognized cause</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <label><strong>OR,</strong> any of the following from:</label>
                    <div>
                        <input asp-for="LaboratoryCriteria3" type="checkbox" disabled>
                        <span>Laboratory criteria defined under PNU2</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <label><strong>*Immunocompromised patients include only:</strong></label>
                    <ul>
                        <li>
                            Those with neutropenia defined as absolute neutrophil count or total white blood cell count (WBC <500 /mm3)
                        </li>
                        <li>Those with leukemia, lymphoma or who are HIV positive with CD4 count <200</li>
                        <li>Those who have undergone splenectomy</li>
                        <li>Those who have a history of solid organ or hematopoietic stem cell transplant</li>
                        <li>Those on cytotoxic chemotherapy</li>
                        <li>Those on enteral or parenteral administered steroids (exclude inhaled and topical steroids) daily for >14 consecutive days on the date of event</li>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<script>
       document.addEventListener("DOMContentLoaded", function () {
        function checkAndToggleSections() {
            // Check if any field in PNEU1_1 is filled
            let pneu1_1_filled = document.querySelector("#pneu1_1_section input:checked, #pneu1_1_section input[type='text']:not([value='']), #pneu1_1_section input[type='date']:not([value=''])");

            // Check if any field in PNEU1_2 is filled
            let pneu1_2_filled = document.querySelector("#pneu1_2_section input:checked, #pneu1_2_section input[type='text']:not([value='']), #pneu1_2_section input[type='date']:not([value=''])");

            // Check if any field in PNEU1_3 is filled
            let pneu1_3_filled = document.querySelector("#pneu1_3_section input:checked, #pneu1_3_section input[type='text']:not([value='']), #pneu1_3_section input[type='date']:not([value=''])");

            // Check if any field in PNEU2_1 is filled
            let pneu2_1_filled = document.querySelector("#pneu2_1_section input:checked, #pneu2_1_section input[type='text']:not([value='']), #pneu2_1_section input[type='date']:not([value=''])");

            // Check if any field in PNEU2_2 is filled
            let pneu2_2_filled = document.querySelector("#pneu2_2_section input:checked, #pneu2_2_section input[type='text']:not([value='']), #pneu2_2_section input[type='date']:not([value=''])");

            // Check if any field in PNEU3 is filled
            let pneu3_filled = document.querySelector("#pneu3_section input:checked, #pneu3_section input[type='text']:not([value='']), #pneu3_section input[type='date']:not([value=''])");

            // Logic to show or hide sections based on filled inputs
            if (pneu1_1_filled) {
                document.getElementById("pneu1_1_section").style.display = "block";
                document.getElementById("pneu1_2_section").style.display = "block";  // Show PNEU1_2 if PNEU1_1 is filled
                document.getElementById("pneu1_3_section").style.display = "block";  // Show PNEU1_3 if PNEU1_1 is filled
                document.getElementById("pneu2_1_section").style.display = "block";  // Show PNEU2_1 if PNEU1_1 is filled
                document.getElementById("pneu2_2_section").style.display = "block";  // Show PNEU2_2 if PNEU1_1 is filled
                document.getElementById("pneu3_section").style.display = "none";    // Hide PNEU3 if PNEU1_1 is filled
            } else if (pneu1_2_filled) {
                document.getElementById("pneu1_2_section").style.display = "block"; // Show PNEU1_2 if it is filled
                document.getElementById("pneu1_1_section").style.display = "none";
                document.getElementById("pneu1_3_section").style.display = "none";
                document.getElementById("pneu2_1_section").style.display = "none";
                document.getElementById("pneu2_2_section").style.display = "none";
                document.getElementById("pneu3_section").style.display = "none"; // Hide PNEU3 if PNEU1_2 is filled
            } else if (pneu1_3_filled) {
                document.getElementById("pneu1_3_section").style.display = "block"; // Show PNEU1_3 if it is filled
                document.getElementById("pneu1_1_section").style.display = "none";
                document.getElementById("pneu1_2_section").style.display = "none";
                document.getElementById("pneu2_1_section").style.display = "none";
                document.getElementById("pneu2_2_section").style.display = "none";
                document.getElementById("pneu3_section").style.display = "none"; // Hide PNEU3 if PNEU1_3 is filled
            } else if (pneu2_1_filled) {
                document.getElementById("pneu2_1_section").style.display = "block"; // Show PNEU2_1 if it is filled
                document.getElementById("pneu1_1_section").style.display = "none";
                document.getElementById("pneu1_2_section").style.display = "none";
                document.getElementById("pneu1_3_section").style.display = "none";
                document.getElementById("pneu2_2_section").style.display = "none";
                document.getElementById("pneu3_section").style.display = "none"; // Hide PNEU3 if PNEU2_1 is filled
            } else if (pneu2_2_filled) {
                document.getElementById("pneu2_2_section").style.display = "block"; // Show PNEU2_2 if it is filled
                document.getElementById("pneu1_1_section").style.display = "none";
                document.getElementById("pneu1_2_section").style.display = "none";
                document.getElementById("pneu1_3_section").style.display = "none";
                document.getElementById("pneu2_1_section").style.display = "none";
                document.getElementById("pneu3_section").style.display = "none"; // Hide PNEU3 if PNEU2_2 is filled
            } else if (pneu3_filled) {
                document.getElementById("pneu3_section").style.display = "block"; // Show PNEU3 if it is filled
                document.getElementById("pneu1_1_section").style.display = "none";
                document.getElementById("pneu1_2_section").style.display = "none";
                document.getElementById("pneu1_3_section").style.display = "none";
                document.getElementById("pneu2_1_section").style.display = "none";
                document.getElementById("pneu2_2_section").style.display = "none"; // Hide PNEU2 if PNEU3 is filled
            } else {
                // If none of the sections are filled, hide all sections
                document.getElementById("pneu1_1_section").style.display = "none";
                document.getElementById("pneu1_2_section").style.display = "none";
                document.getElementById("pneu1_3_section").style.display = "none";
                document.getElementById("pneu2_1_section").style.display = "none";
                document.getElementById("pneu2_2_section").style.display = "none";
                document.getElementById("pneu3_section").style.display = "none";
            }
        }

        // Attach event listener to all input fields in relevant sections
        let inputs = document.querySelectorAll("#pneu1_1_section input, #pneu1_2_section input, #pneu1_3_section input, #pneu2_1_section input, #pneu2_2_section input, #pneu3_section input");
        inputs.forEach(input => {
            input.addEventListener("change", checkAndToggleSections);
        });

        checkAndToggleSections(); // Initial check on page load
    });

</script>

<a asp-action="PatientIndex" class="btn btn-primary">Back to List</a>
