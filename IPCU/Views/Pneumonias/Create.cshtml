@model IPCU.Models.Pneumonia

@{
    ViewData["Title"] = "Create";
}

<h1>Create</h1>

<h4>Pneumonia</h4>
<hr />
<form asp-action="Create" method="post">
    <fieldset class="border p-3 mb-4">
        <legend class="w-auto px-2 font-weight-bold">Patient Information</legend>
        <table class="table table-bordered">
            <tr>
                <td>
                    <label asp-for="Fname"></label>
                    <input asp-for="Fname" class="form-control" />
                    <span asp-validation-for="Fname" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="Mname"></label>
                    <input asp-for="Mname" class="form-control" />
                    <span asp-validation-for="Mname" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="Lname"></label>
                    <input asp-for="Lname" class="form-control" />
                    <span asp-validation-for="Lname" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="HospitalNumber"></label>
                    <input asp-for="HospitalNumber" class="form-control" />
                    <span asp-validation-for="HospitalNumber" class="text-danger"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="DateOfBirth"></label>
                    <input asp-for="DateOfBirth" type="date" class="form-control" />
                    <span asp-validation-for="DateOfBirth" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="Age"></label>
                    <input asp-for="Age" class="form-control" />
                    <span asp-validation-for="Age" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="UnitWardArea"></label>
                    <input asp-for="UnitWardArea" class="form-control" />
                    <span asp-validation-for="UnitWardArea" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="MainService"></label>
                    <input asp-for="MainService" class="form-control" />
                    <span asp-validation-for="MainService" class="text-danger"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <label asp-for="DateOfEvent"></label>
                    <input asp-for="DateOfEvent" type="date" class="form-control" />
                    <span asp-validation-for="DateOfEvent" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="Investigator"></label>
                    <input asp-for="Investigator" class="form-control" />
                    <span asp-validation-for="Investigator" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="DateOfAdmission"></label>
                    <input asp-for="DateOfAdmission" type="date" class="form-control" />
                    <span asp-validation-for="DateOfAdmission" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="Disposition"></label>
                    <select asp-for="Disposition" class="form-control">
                        <option value="">-- Select Disposition --</option>
                        <option>Mortality</option>
                        <option>Discharged</option>
                        <option>Still Admitted</option>
                        <option>Transferred In</option>
                        <option>Transferred Out</option>
                    </select>
                    <span asp-validation-for="Disposition" class="text-danger"></span>

                <div id="dispositionTransferDiv" style="display:none;">

                    <label asp-for="DispositionTransfer"></label>
                    <input asp-for="DispositionTransfer" class="form-control" />
                    <span asp-validation-for="DispositionTransfer" class="text-danger"></span>

                </div>
                </td>
                
            </tr>
            <tr>
               
                <td>
                    <label asp-for="DispositionDate"></label>
                    <input asp-for="DispositionDate" type="date" class="form-control" />
                    <span asp-validation-for="DispositionDate" class="text-danger"></span>
                </td>
              
                <td>
                    <label asp-for="Gender"></label>
                    <select asp-for="Gender" class="form-control">
                        <option value="">Select</option>
                        <option>Male</option>
                        <option>Female</option>
                    </select>
                    <span asp-validation-for="Gender" class="text-danger"></span>
                </td>
                <td>
                    <label asp-for="Classification"></label>
                    <select asp-for="Classification" class="form-control">
                        <option value="">Select</option>
                        <option>Pay</option>
                        <option>Service</option>
                    </select>
                    <span asp-validation-for="Classification" class="text-danger"></span>
                </td>
                    <td>
                    <label asp-for="MDRO"></label>
                    <select asp-for="MDRO" class="form-control">
                        <option value="">Select</option>
                        <option>Yes</option>
                        <option>No</option>
                    </select>
                    <span asp-validation-for="MDRO" class="text-danger"></span>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <label asp-for="TypeClass" class="control-label"></label>
                    <select asp-for="TypeClass" class="form-control" id="TypeClass">
                        <option value="">Select Option</option>
                        <option value="PNEU1">PNEU1</option>
                        <option value="PNEU2">PNEU2</option>
                        <option value="PNEU3">PNEU3</option>
                    </select>
                    <span asp-validation-for="TypeClass" class="text-danger"></span>
                </td>
                <td colspan="4">
                    <label asp-for="PNEU_Subclass" class="control-label"></label>
                    <select asp-for="PNEU_Subclass" class="form-control" id="PNEU_Subclass">
                        <option value="">Select Subclass</option>
                    </select>
                    <span asp-validation-for="PNEU_Subclass" class="text-danger"></span>
                </td>
            </tr>
            
        </table>
    </fieldset>

            <!-- Hidden Form Table -->
    <div id="pneu1_1_section" class="table-section" style="display: none; margin-top: 20px;">
        <table class="table table-bordered">
            <thead class="table-grey">
                <tr>
                    <th style="text-align: center; background-color: #f8f9fa;">PNU1 Details</th>
                </tr>
                <tr>
                    <th>
                        <strong>Any patient, any age group,</strong>
                        has one of the following found in <strong>two or more</strong> chest imaging test results
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- First Step -->
                <tr id="step1">
                    <td>
                        <label>
                            Either <strong>new and persistent OR progressive and persistent:</strong>
                        </label>
                        <div>
                            <label><input type="radio" asp-for="PersistentorProgressive1_1" value="Infiltrate"> Infiltrate</label><br>
                            <label><input type="radio" asp-for="PersistentorProgressive1_1" value="Consolidation"> Consolidation</label><br>
                            <label><input type="radio" asp-for="PersistentorProgressive1_1" value="Cavitation"> Cavitation</label><br>
                            <label><input type="radio" asp-for="PersistentorProgressive1_1" value="Pneumatoceles"> Pneumatoceles, ≤1 year old</label>
                        </div>
                        <span asp-validation-for="PersistentorProgressive1_1" class="text-danger"></span>
                    </td>
                </tr>

                <!-- Second Step (Initially Hidden) -->
                <tr id="step2" style="display: none;">
                    <td>
                        <label><strong>AND, at least one (1) of the following:</strong></label>
                        <div>
                            <input class="form-check-input requirement" asp-for="Fever1_1" />
                            <span>Fever (> 38.0°C)</span>
                        </div>
                        <div>
                            <input class="form-check-input requirement" asp-for="Leukopenia1_1" />
                            <span>Leukopenia (≤ 4,000 WBC/mm³)</span>
                        </div>
                        <div>
                            <input class="form-check-input requirement" asp-for="Leukocytosis1_1" />
                            <span>Leukocytosis (≥ 12,000 WBC/mm³)</span>
                        </div>
                        <div>
                            <input class="form-check-input requirement" asp-for="Adults70old1_1" />
                            <span>Adults ≥ 70 years old, altered mental status with no other recognized cause</span>
                        </div>
                    </td>
                </tr>

                <!-- Third Step (Initially Hidden) -->
                <tr id="step3" style="display: none;">
                    <td>
                        <label><strong>AND, at least two (2) of the following:</strong></label>
                        <div>
                            <input class="form-check-input final-requirement" asp-for="NewPurulentSputum1_1" />
                            <span>New onset of purulent sputum or change in character of sputum</span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement" asp-for="WorseningCoughOrDyspnea1_1" />
                            <span>New onset or worsening cough, or dyspnea, or tachypnea</span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement" asp-for="RalesOrBronchialBreathSounds1_1" />
                            <span>Rales or bronchial breath sounds</span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement" asp-for="WorseningGasExchange1_1" />
                            <span>Worsening gas exchange, increased oxygen requirements, or ventilator demand</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
  </div>


            <!-- PNEU1_2 Form -->
    <div id="pneu1_2_section" class="table-section" style="display: none; margin-top: 20px;">
        <table class="table table-bordered">
            <thead class="table-grey">
                <tr>
                    <th style="text-align: center; background-color: #f8f9fa;">PNU1 Details</th>
                </tr>
                <tr>
                    <th>
                        <strong>Alternative criteria,</strong> for infants
                        <strong>≤ 1 year old,</strong> has one of the following found in
                        <strong> two or more</strong> chest imaging test results
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- First Step -->
                <tr id="step1_2">
                    <td>
                        <label>
                            Either <strong>new and persistent OR progressive and persistent:</strong>
                        </label>
                        <div>
                            <label><input type="radio" asp-for="PersistentorProgressive1_2" value="Infiltrate"> Infiltrate</label><br>
                            <label><input type="radio" asp-for="PersistentorProgressive1_2" value="Consolidation"> Consolidation</label><br>
                            <label><input type="radio" asp-for="PersistentorProgressive1_2" value="Cavitation"> Cavitation</label><br>
                            <label><input type="radio" asp-for="PersistentorProgressive1_2" value="Pneumatoceles"> Pneumatoceles, ≤1 year old</label>
                        </div>
                        <span asp-validation-for="PersistentorProgressive1_2" class="text-danger"></span>
                    </td>
                </tr>

                <!-- Second Step (Initially Hidden) -->
                <tr id="step2_2" style="display: none;">
                    <td>
                        <label><strong>AND</strong></label>
                        <div>
                            <input class="form-check-input requirement_2" asp-for="WorseningGasExchange1_2" />
                            <span>Worsening gas exchange</span>
                        </div>
                    </td>
                </tr>

                <!-- Third Step (Initially Hidden) -->
                <tr id="step3_2" style="display: none;">
                    <td>
                        <label><strong>AND, at least three (3) of the following:</strong></label>
                        <div>
                            <input class="form-check-input final-requirement_2" asp-for="TemperatureInstability1_2" />
                            <span>Temperature instability</span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement_2" asp-for="LeukopeniaOrLeukocytosis1_2" />
                            <span>
                                Leukopenia (≤ 4000 WBC/mm³) or
                                leukocytosis (≥ 15,000 WBC/mm³) and left shift (≥ 10% band forms)
                            </span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement_2" asp-for="NewPurulentSputum1_2" />
                            <span>
                                New onset of purulent sputum or change
                                in character of sputum, or increased
                                respiratory secretions, or suctioning
                                requirements
                            </span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement_2" asp-for="ApneaOrTachypneaOrNasalFlaring1_2" />
                            <span>
                                Apnea, tachypnea, nasal flaring with
                                retraction of chest wall, or with grunting
                            </span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement_2" asp-for="WheezingRalesOrRhonchi1_2" />
                            <span>Wheezing, rales, or rhonchi</span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement_2" asp-for="Cough1_2" />
                            <span>Cough</span>
                        </div>
                        <div>
                            <input class="form-check-input final-requirement_2" asp-for="BradycardiaOrTachycardia1_2" />
                            <span>Bradycardia (&lt;100) or tachycardia (&gt;170)</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="pneu1_3_section" class="table-section" style="display: none;">

        <table class="table table-bordered">
            <thead class="table-grey">
                <tr>
                    <th style="text-align: center; background-color: #f8f9fa;">PNU1_3 Details</th>
                </tr>
                <tr>
                    <th>
                        <strong>Alternative criteria,</strong> for child <strong>>1 year oldor ≤12years old,</strong> has one of the following found in <strong> two or more</strong> chest imaging test results
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <label>
                            Either <strong>new and persistent OR progressive and persistent:</strong>
                        </label>
                        <div>
                            <label><input type="radio" asp-for="PersistentorProgressive1_3" value="Infiltrate"> Infiltrate</label><br>
                            <label><input type="radio" asp-for="PersistentorProgressive1_3" value="Consolidation"> Consolidation</label><br>
                            <label><input type="radio" asp-for="PersistentorProgressive1_3" value="Cavitation"> Cavitation</label><br>
                        </div>
                        <span asp-validation-for="PersistentorProgressive1_3" class="text-danger"></span>
                    </td>
                </tr>
                <tr>
                    <td>
                    <label><strong>AND, at least three (3) of the following:</strong></label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div>
                            <input class="form-check-input" asp-for="Fever1_3" />
                            <span>Fever (> 38°C) or hypothermia (<36°C)</span>
                        </div>
                        <div>
                            <input class="form-check-input" asp-for="Leukopenia1_3" />
                            <span>
                                Leukopenia (≤ 4000 WBC/mm3
                                ) or
                                leukocytosis (≥ 15,000 WBC/mm3
                                )
                            </span>
                        </div>
                        <div>
                            <input class="form-check-input" asp-for="NewPurulentSputum1_3" />
                            <span>New onset of purulent sputumor changein character of sputum, or increasedrespiratory secretions, or suctioningrequirements</span>
                        </div>
                        <div>
                            <input class="form-check-input" asp-for="NewWorseningCough1_3" />
                            <span>New onset or worsening cough, or dyspnea, or apnea, or tachypnea</span>
                        </div>
                        <div>
                            <input class="form-check-input" asp-for="RalesorBronchial1_3" />
                            <span>Rales or bronchial breath sounds</span>
                        </div>
                        <div>
                            <input class="form-check-input" asp-for="WorseningGas1_3" />
                            <span>Worsening gas exchange, increasedoxygen requirements, or ventilator demand</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="pneu2_1_section" class="table-section" style="display: none;">

            <table  class="table table-bordered">
                <thead>
                    <tr>
                        <th colspan="2" class="text-center">PNEU2_1 Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><label asp-for="PersistentorProgressive2_1" class="form-label"></label></td>
                        <td>
                        <div>
                            <label><input type="radio" name="PersistentorProgressive2_1" value="Infiltrate"> Infiltrate</label><br>
                            <label><input type="radio" name="PersistentorProgressive2_1" value="Consolidation"> Consolidation</label><br>
                            <label><input type="radio" name="PersistentorProgressive2_1" value="Cavitation"> Cavitation</label><br>
                            <label><input type="radio" name="PersistentorProgressive2_1" value="Pneumatoceles"> Pneumatoceles</label>
                        </div>

                            <span asp-validation-for="PersistentorProgressive2_1" class="text-danger"></span>
                        </td>
                    </tr>
                    <tr><td>Fever</td><td><input class="form-check-input" asp-for="Fever2_1" /> @Html.DisplayNameFor(model => model.Fever2_1)</td></tr>
                    <tr><td>Leukopenia</td><td><input class="form-check-input" asp-for="Leukopenia12_1" /> @Html.DisplayNameFor(model => model.Leukopenia12_1)</td></tr>
                    <tr><td>Leukocytosis</td><td><input class="form-check-input" asp-for="Leukocytosis2_1" /> @Html.DisplayNameFor(model => model.Leukocytosis2_1)</td></tr>
                    <tr><td>Adults ≥ 70 Years</td><td><input class="form-check-input" asp-for="Adults70old2_1" /> @Html.DisplayNameFor(model => model.Adults70old2_1)</td></tr>
                    <tr><td>New Purulent Sputum</td><td><input class="form-check-input" asp-for="NewPurulentSputum2_1" /> @Html.DisplayNameFor(model => model.NewPurulentSputum2_1)</td></tr>
                    <tr><td>Worsening Cough/Dyspnea</td><td><input class="form-check-input" asp-for="WorseningCoughOrDyspnea2_1" /> @Html.DisplayNameFor(model => model.WorseningCoughOrDyspnea2_1)</td></tr>
                    <tr><td>Rales or Bronchial Breath Sounds</td><td><input class="form-check-input" asp-for="RalesOrBronchialBreathSounds2_1" /> @Html.DisplayNameFor(model => model.RalesOrBronchialBreathSounds2_1)</td></tr>
                    <tr><td>Worsening Gas Exchange</td><td><input class="form-check-input" asp-for="WorseningGasExchange2_1" /> @Html.DisplayNameFor(model => model.WorseningGasExchange2_1)</td></tr>
                    <tr><td>Organism Identified from Blood</td><td><input class="form-check-input" asp-for="OrganismIdentifiedFromBlood_2_1" /> @Html.DisplayNameFor(model => model.OrganismIdentifiedFromBlood_2_1)</td></tr>
                    <tr><td>Positive Quantitative Culture (LRT)</td><td><input class="form-check-input" asp-for="PositiveQuantitativeCultureLRT_2_1" /> @Html.DisplayNameFor(model => model.PositiveQuantitativeCultureLRT_2_1)</td></tr>
                    <tr><td>BAL Cells Contain Intracellular Bacteria</td><td><input class="form-check-input" asp-for="BALCellsContainIntracellularBacteria_2_1" /> @Html.DisplayNameFor(model => model.BALCellsContainIntracellularBacteria_2_1)</td></tr>
                    <tr><td>Positive Quantitative Culture (Lung Tissue)</td><td><input class="form-check-input" asp-for="PositiveQuantitativeCultureLungTissue_2_1" /> @Html.DisplayNameFor(model => model.PositiveQuantitativeCultureLungTissue_2_1)</td></tr>
                    <tr><td>Histopathologic Exam</td><td><input class="form-check-input" asp-for="HistopathologicExam2_1" /> @Html.DisplayNameFor(model => model.HistopathologicExam2_1)</td></tr>
                    <tr><td>Abscess Formation or Foci</td><td><input class="form-check-input" asp-for="AbscessFormationOrFoci_2_1" /> @Html.DisplayNameFor(model => model.AbscessFormationOrFoci_2_1)</td></tr>
                    <tr><td>Evidence of Fungal Invasion</td><td><input class="form-check-input" asp-for="EvidenceOfFungalInvasion_2_1" /> @Html.DisplayNameFor(model => model.EvidenceOfFungalInvasion_2_1)</td></tr>
                    <tr>
                        <td><label asp-for="CultureDate2_1" class="control-label"></label></td>
                        <td><input asp-for="CultureDate2_1" class="form-control" /><span asp-validation-for="CultureDate2_1" class="text-danger"></span></td>
                    </tr>
                    <tr>
                        <td><label asp-for="CultureResults2_1" class="control-label"></label></td>
                        <td><input asp-for="CultureResults2_1" class="form-control" /><span asp-validation-for="CultureResults2_1" class="text-danger"></span></td>
                    </tr>
                </tbody>
            </table>
    </div>

    <div id="pneu2_2_section" class="table-section" style="display: none;">

            <table class="table table-bordered">
                <tr>
                    <td>
                        <label asp-for="PersistentorProgressive2_2">Persistent or Progressive:</label>
                    <div>
                        <label><input type="radio" name="PersistentorProgressive2_2" value="Infiltrate"> Infiltrate</label><br>
                        <label><input type="radio" name="PersistentorProgressive2_2" value="Consolidation"> Consolidation</label><br>
                        <label><input type="radio" name="PersistentorProgressive2_2" value="Cavitation"> Cavitation</label><br>
                        <label><input type="radio" name="PersistentorProgressive2_2" value="Pneumatoceles"> Pneumatoceles</label>
                    </div>

                        <span asp-validation-for="PersistentorProgressive2_2" class="text-danger"></span>
                    </td>
                </tr>

                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="Fever2_2" /> Fever</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="Leukopenia12_2" /> Leukopenia</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="Leukocytosis2_2" /> Leukocytosis</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="Adults70old2_2" /> Adults ≥ 70 years old</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="NewPurulentSputum2_2" /> New Purulent Sputum</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="WorseningCoughOrDyspnea2_2" /> Worsening Cough or Dyspnea</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="RalesOrBronchialBreathSounds2_2" /> Rales or Bronchial Breath Sounds</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="WorseningGasExchange2_2" /> Worsening Gas Exchange</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="VirusBordetellaLegionella2_2" /> Virus, Bordetella, Legionella</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="FourfoldrisePaired2_2" /> Fourfold Rise in Paired Samples</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="FourfoldriseLegionella2_2" /> Fourfold Rise in Legionella</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="DetectionofLegionella2_2" /> Detection of Legionella</label></td>
                </tr>

                <tr>
                    <td>
                        <label asp-for="CultureDate2_2">Culture Date:</label>
                        <input asp-for="CultureDate2_2" class="form-control" />
                        <span asp-validation-for="CultureDate2_2" class="text-danger"></span>
                    </td>
                </tr>

                <tr>
                    <td>
                        <label asp-for="CultureResults2_2">Culture Results:</label>
                        <input asp-for="CultureResults2_2" class="form-control" />
                        <span asp-validation-for="CultureResults2_2" class="text-danger"></span>
                    </td>
                </tr>
            </table>
    </div>

    <div id="pneu3_section" class="table-section" style="display: none;">
            <!-- PNEU3 Table (Hidden by Default) -->
            <table class="table table-bordered">
                <tr>
                    <td>
                        <label asp-for="PersistentorProgressive3">Persistent or Progressive:</label>
                    <div>
                        <label><input type="radio" name="PersistentorProgressive3" value="Infiltrate"> Infiltrate</label><br>
                        <label><input type="radio" name="PersistentorProgressive3" value="Consolidation"> Consolidation</label><br>
                        <label><input type="radio" name="PersistentorProgressive3" value="Cavitation"> Cavitation</label><br>
                        <label><input type="radio" name="PersistentorProgressive3" value="Pneumatoceles"> Pneumatoceles</label>
                    </div>

                        <span asp-validation-for="PersistentorProgressive3" class="text-danger"></span>
                    </td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="Fever3" /> Fever</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="Adults70old3" /> Adults ≥ 70 years old</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="NewPurulentSputum3" /> New Purulent Sputum</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="WorseningCoughOrDyspnea3" /> Worsening Cough or Dyspnea</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="RalesOrBronchialBreathSounds3" /> Rales or Bronchial Breath Sounds</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="WorseningGasExchange3" /> Worsening Gas Exchange</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="Hemoptysis3" /> Hemoptysis</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="PleuriticChestPain3" /> Pleuritic Chest Pain</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="IdentificationCandida3" /> Identification of Candida</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="EvidenceofFungi3" /> Evidence of Fungi</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="DirectMicroscopicExam3" /> Direct Microscopic Exam</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="PositiveCultureFungi3" /> Positive Culture for Fungi</label></td>
                </tr>
                <tr>
                    <td><label class="form-check-label"><input class="form-check-input" asp-for="NonCultureDiagnostic3" /> Non-Culture Diagnostic Evidence</label></td>
                </tr>
            </table>
    </div>


            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" />
            </div>
        </form>
 
<div>
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const subclassMapping = {
                "PNEU1": ["pneu1_1", "pneu1_2", "pneu1_3"],
                "PNEU2": ["pneu2_1", "pneu2_2"],
                "PNEU3": [] // No subclasses, show table directly
            };

            const typeClassSelect = document.getElementById("TypeClass");
            const subclassSelect = document.getElementById("PNEU_Subclass");

            // Function to hide all tables and clear their input fields
            function hideAllTables() {
                document.querySelectorAll(".table-section").forEach(table => {
                    table.style.display = "none";
                    clearTableInputs(table); // Clear input fields
                });
            }

            // Function to clear input fields in a table
            function clearTableInputs(table) {
                table.querySelectorAll("input, select, textarea").forEach(input => {
                    if (input.type === "checkbox" || input.type === "radio") {
                        input.checked = false;
                    } else {
                        input.value = "";
                    }
                });
            }

            // Function to reset subclass dropdown
            function resetSubclassDropdown() {
                subclassSelect.innerHTML = '<option value="">Select Subclass</option>';
                subclassSelect.disabled = true;
            }

            // Hide all tables initially
            hideAllTables();
            resetSubclassDropdown();

            // When TypeClass is changed
            typeClassSelect.addEventListener("change", function () {
                hideAllTables(); // Hide and clear currently visible tables
                resetSubclassDropdown(); // Reset subclass dropdown

                const selectedType = this.value;

                // If PNEU3 is selected, show its table immediately and hide the subclass dropdown
                if (selectedType === "PNEU3") {
                    subclassSelect.style.display = "none"; // Hide subclass dropdown
                    const table = document.getElementById("pneu3_section");
                    if (table) table.style.display = "table"; // Show PNEU3 table
                    return; // Stop further execution
                }

                // For other types, reset and show subclass dropdown if applicable
                subclassSelect.style.display = "block";
                if (selectedType && subclassMapping[selectedType].length > 0) {
                    subclassSelect.disabled = false;
                    subclassMapping[selectedType].forEach(subclass => {
                        const option = document.createElement("option");
                        option.value = subclass;
                        option.textContent = subclass.toUpperCase();
                        subclassSelect.appendChild(option);
                    });
                }
            });

            // When Subclass is changed
            subclassSelect.addEventListener("change", function () {
                hideAllTables(); // Hide and clear all tables before showing a new one
                const selectedSubclass = this.value;

                if (selectedSubclass) {
                    const table = document.getElementById(`${selectedSubclass}_section`);
                    if (table) {
                        table.style.display = table.tagName === "TABLE" ? "table" : "block"; // Correct display property
                    }
                }
            });
        });

    </script>

    <!--PARA SA DYNAMIC NG PNEU1_1-->

    <!-- jQuery for Dynamic Behavior -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Step 1: Show the second row when a radio button is selected
            $('input[name="PersistentorProgressive1_1"]').change(function() {
                $('#step2').fadeIn();
            });

            // Step 2: Show the third row when at least one checkbox is checked
            $('.requirement').change(function() {
                if ($('.requirement:checked').length > 0) {
                    $('#step3').fadeIn();
                } else {
                    $('#step3').fadeOut(); // Hide if no checkboxes are selected
                }
            });

            // Step 3: Ensure at least 2 checkboxes are checked in the last step
            $('.final-requirement').change(function() {
                if ($('.final-requirement:checked').length >= 2) {
                }
            });
        });
    </script>
    <!--pnu1_2-->
    <script>
        $(document).ready(function() {
            // Step 1: Show the second row when a radio button is selected
            $('input[name="PersistentorProgressive1_2"]').change(function() {
                $('#step2_2').fadeIn();
            });

            // Step 2: Show the third row when the requirement is met
            $('.requirement_2').change(function() {
                if ($('.requirement_2:checked').length > 0) {
                    $('#step3_2').fadeIn();
                } else {
                    $('#step3_2').fadeOut();
                }
            });

            // Step 3: Ensure at least 3 checkboxes are checked in the last step
            $('.final-requirement_2').change(function() {
                if ($('.final-requirement_2:checked').length >= 3) {
                }
            });
        });
    </script>
}